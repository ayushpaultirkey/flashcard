<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="description" content="A small social media website to share posts">
    <meta name="keywords" content="social, javascript, project">
    <meta name="author" content="Ayush Paul Tirkey">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <title>flashcard</title>
    <style>
         *, ::before, ::after {box-sizing: border-box;border-width: 0;border-style: solid;border-color: #e5e7eb;}::before, ::after {--tw-content: '';}html {line-height: 1.5;-webkit-text-size-adjust: 100%;-moz-tab-size: 4;-o-tab-size: 4;tab-size: 4;font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings: normal;font-variation-settings: normal;}body {margin: 0;line-height: inherit;}hr {height: 0;color: inherit;border-top-width: 1px;}abbr:where([title]) {-webkit-text-decoration: underline dotted;text-decoration: underline dotted;}h1, h2, h3, h4, h5, h6 {font-size: inherit;font-weight: inherit;}a {color: inherit;text-decoration: inherit;}b, strong {font-weight: bolder;}code, kbd, samp, pre {font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-size: 1em;}small {font-size: 80%;}sub, sup {font-size: 75%;line-height: 0;position: relative;vertical-align: baseline;}sub {bottom: -0.25em;}sup {top: -0.5em;}table {text-indent: 0;border-color: inherit;border-collapse: collapse;}button, input, optgroup, select, textarea {font-family: inherit;font-size: 100%;font-weight: inherit;line-height: inherit;color: inherit;margin: 0;padding: 0;}button, select {text-transform: none;}button, [type='button'], [type='reset'], [type='submit'] {-webkit-appearance: button;background-color: transparent;background-image: none;}:-moz-focusring {outline: auto;}:-moz-ui-invalid {box-shadow: none;}progress {vertical-align: baseline;}::-webkit-inner-spin-button, ::-webkit-outer-spin-button {height: auto;}[type='search'] {-webkit-appearance: textfield;outline-offset: -2px;}::-webkit-search-decoration {-webkit-appearance: none;}::-webkit-file-upload-button {-webkit-appearance: button;font: inherit;}summary {display: list-item;}blockquote, dl, dd, h1, h2, h3, h4, h5, h6, hr, figure, p, pre {margin: 0;}fieldset {margin: 0;padding: 0;}legend {padding: 0;}ol, ul, menu {list-style: none;margin: 0;padding: 0;}textarea {resize: vertical;}input::-moz-placeholder, textarea::-moz-placeholder {opacity: 1;color: #9ca3af;}input::placeholder, textarea::placeholder {opacity: 1;color: #9ca3af;}button, [role="button"] {cursor: pointer;}:disabled {cursor: default;}img, svg, video, canvas, audio, iframe, embed, object {display: block;vertical-align: middle;}img, video {max-width: 100%;height: auto;}[hidden] {display: none;}*, ::before, ::after {--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / 0.5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;}::backdrop {--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / 0.5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;}.visible {visibility: visible;}.invisible {visibility: hidden;}.absolute {position: absolute;}.relative {position: relative;}.right-0 {right: 0px;}.my-3 {margin-top: 0.75rem;margin-bottom: 0.75rem;}.mt-3 {margin-top: 0.75rem;}.flex {display: flex;}.table {display: table;}.hidden {display: none;}.h-20 {height: 5rem;}.h-full {height: 100%;}.w-24 {width: 6rem;}.w-full {width: 100%;}.transform {transform: translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y));}.resize-none {resize: none;}.flex-col {flex-direction: column;}.items-center {align-items: center;}.justify-center {justify-content: center;}.space-x-2 > :not([hidden]) ~ :not([hidden]) {--tw-space-x-reverse: 0;margin-right: calc(0.5rem * var(--tw-space-x-reverse));margin-left: calc(0.5rem * calc(1 - var(--tw-space-x-reverse)));}.space-x-3 > :not([hidden]) ~ :not([hidden]) {--tw-space-x-reverse: 0;margin-right: calc(0.75rem * var(--tw-space-x-reverse));margin-left: calc(0.75rem * calc(1 - var(--tw-space-x-reverse)));}.space-y-2 > :not([hidden]) ~ :not([hidden]) {--tw-space-y-reverse: 0;margin-top: calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom: calc(0.5rem * var(--tw-space-y-reverse));}.space-y-3 > :not([hidden]) ~ :not([hidden]) {--tw-space-y-reverse: 0;margin-top: calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom: calc(0.75rem * var(--tw-space-y-reverse));}.space-y-5 > :not([hidden]) ~ :not([hidden]) {--tw-space-y-reverse: 0;margin-top: calc(1.25rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom: calc(1.25rem * var(--tw-space-y-reverse));}.overflow-auto {overflow: auto;}.overflow-hidden {overflow: hidden;}.rounded-lg {border-radius: 0.5rem;}.rounded-r-none {border-top-right-radius: 0px;border-bottom-right-radius: 0px;}.rounded-l-none {border-top-left-radius: 0px;border-bottom-left-radius: 0px;}.border-2 {border-width: 2px;}.border-solid {border-style: solid;}.border-blue-400 {--tw-border-opacity: 1;border-color: rgb(96 165 250 / var(--tw-border-opacity));}.border-gray-200 {--tw-border-opacity: 1;border-color: rgb(229 231 235 / var(--tw-border-opacity));}.border-gray-400 {--tw-border-opacity: 1;border-color: rgb(156 163 175 / var(--tw-border-opacity));}.border-l-gray-600 {--tw-border-opacity: 1;border-left-color: rgb(75 85 99 / var(--tw-border-opacity));}.border-opacity-50 {--tw-border-opacity: 0.5;}.bg-blue-400 {--tw-bg-opacity: 1;background-color: rgb(96 165 250 / var(--tw-bg-opacity));}.bg-gray-100 {--tw-bg-opacity: 1;background-color: rgb(243 244 246 / var(--tw-bg-opacity));}.bg-gray-200 {--tw-bg-opacity: 1;background-color: rgb(229 231 235 / var(--tw-bg-opacity));}.bg-transparent {background-color: transparent;}.p-3 {padding: 0.75rem;}.p-6 {padding: 1.5rem;}.px-3 {padding-left: 0.75rem;padding-right: 0.75rem;}.px-6 {padding-left: 1.5rem;padding-right: 1.5rem;}.py-2 {padding-top: 0.5rem;padding-bottom: 0.5rem;}.text-4xl {font-size: 2.25rem;line-height: 2.5rem;}.text-lg {font-size: 1.125rem;line-height: 1.75rem;}.text-sm {font-size: 0.875rem;line-height: 1.25rem;}.text-xl {font-size: 1.25rem;line-height: 1.75rem;}.text-xs {font-size: 0.75rem;line-height: 1rem;}.font-bold {font-weight: 700;}.font-normal {font-weight: 400;}.font-semibold {font-weight: 600;}.text-black {--tw-text-opacity: 1;color: rgb(0 0 0 / var(--tw-text-opacity));}.text-blue-400 {--tw-text-opacity: 1;color: rgb(96 165 250 / var(--tw-text-opacity));}.text-gray-700 {--tw-text-opacity: 1;color: rgb(55 65 81 / var(--tw-text-opacity));}.text-red-500 {--tw-text-opacity: 1;color: rgb(239 68 68 / var(--tw-text-opacity));}.text-blue-500 {--tw-text-opacity: 1;color: rgb(59 130 246 / var(--tw-text-opacity));}.underline {text-decoration-line: underline;}.shadow-md {--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);}.shadow-blue-200 {--tw-shadow-color: #bfdbfe;--tw-shadow: var(--tw-shadow-colored);}.outline-none {outline: 2px solid transparent;outline-offset: 2px;}.outline-0 {outline-width: 0px;}.transition-colors {transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);transition-duration: 150ms;}.transition-shadow {transition-property: box-shadow;transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);transition-duration: 150ms;}.hover\:text-blue-500:hover {--tw-text-opacity: 1;color: rgb(59 130 246 / var(--tw-text-opacity));}.hover\:shadow-md:hover {--tw-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);--tw-shadow-colored: 0 4px 6px -1px var(--tw-shadow-color), 0 2px 4px -2px var(--tw-shadow-color);box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);}.hover\:shadow-blue-200:hover {--tw-shadow-color: #bfdbfe;--tw-shadow: var(--tw-shadow-colored);}.hover\:shadow-blue-400:hover {--tw-shadow-color: #60a5fa;--tw-shadow: var(--tw-shadow-colored);}@media (min-width: 640px) {.sm\:my-4 {margin-top: 1rem;margin-bottom: 1rem;}.sm\:max-w-md {max-width: 28rem;}.sm\:space-y-4 > :not([hidden]) ~ :not([hidden]) {--tw-space-y-reverse: 0;margin-top: calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom: calc(1rem * var(--tw-space-y-reverse));}.sm\:border {border-width: 1px;}.sm\:text-xl {font-size: 1.25rem;line-height: 1.75rem;}.sm\:shadow-2xl {--tw-shadow: 0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored: 0 25px 50px -12px var(--tw-shadow-color);box-shadow: var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);}}
        html, body {
            padding: 0;
            margin: 0;
            width: 100%;
            height: 100%;
        }
        ::-webkit-scrollbar {
            width: 5px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: lightgrey;
            border-radius: 50px;
        }
        .zoom {
            animation: 0.3s zoom;
        }
        @keyframes zoom {
            from {
                opacity: 0;
                transform: scale(0.95);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }
    </style>
</head>
<body>

    <div class="w-full h-full flex justify-center">
        <div class="w-full sm:shadow-2xl sm:max-w-md sm:my-4 sm:border border-solid border-gray-400 map">
            <div class="app h-full relative overflow-hidden"></div>
        </div>
    </div>

</body>
</html>
<script>
window.$fx={};class Component{constructor(){this.id=crypto.randomUUID(),this.binding={},this.root=null,this.parent=null,this.child={},this.element={},this.args={}}async render(){return this.node("div")}async pre(e=null,t={}){if(this.root=await this.render(),await this.init(t),null==e)return this.root;document.querySelector(e).append(this.root)}async init(e={}){}bind(e=null){let t=crypto.randomUUID();return $fx[t]=e.bind(this),`$fx['${t}']();`}async component(e=null,t={}){if(e instanceof Object){let s=new e;return s.parent=this,s.args=t,this.child[s.id]=s,await s.pre(null,t)}}node(e="",t=[],s={}){let i="x"+Math.random().toString(36).slice(6),o=document.createElement(e),n=[],a=!1;for(var l=0,r=t.length;l<r;l++){if("string"==typeof t[l]){let d=t[l].match(/{.*?}/g);null!==d&&(void 0===this.binding[d[0]]&&(this.binding[d[0]]={element:[],data:d[0]}),this.binding[d[0]].element.push({id:i,type:0,map:t[l]}),a=!0)}o.append(t[l])}for(let h in s){let c=s[h];if("function"==typeof c)c=this.bind(c);else if("object"==typeof c){for(let u in c){let p=(o.hasAttribute(u)?o.getAttribute(u):"")+c[u].toString();-1!==p.indexOf("{")&&(n.push(u),a=!0),o.setAttribute(u,p)}continue}else"string"==typeof c&&-1!==c.indexOf("{")&&(n.push(h),a=!0);o.setAttribute(h,c)}let g=[...new Set(n)];for(var l=0,r=g.length;l<r;l++){let w=o.getAttribute(g[l]),f=w.match(/{.*?}/g);if(null!==f)for(var b=0,m=f.length;b<m;b++)void 0===this.binding[f[b]]&&(this.binding[f[b]]={element:[],data:f[l]}),this.binding[f[b]].element.push({id:i,type:g[l],map:w+("class"===g[l]?` ${i}`:"")})}return a&&o.classList.add(i),o}Set(e="",t=""){let s=e.indexOf("++");e=e.replace("++","");let i=this.binding[e];if(void 0===i)return null;"function"==typeof t&&(t=this.bind(t));let o=i.element;for(var n=0,a=o.length;n<a;n++){let l=o[n].map,r=this.root.classList.contains(o[n].id)?this.root:this.root.querySelector(`.${o[n].id}`);if(0==o[n].type){let d=0==s?"afterbegin":"beforeend";t instanceof Element?(-1!==s?r.insertAdjacentElement(d,t):(r.childNodes.forEach(e=>e.remove()),r.appendChild(t)),t=t.outerHTML):-1!==s?r.insertAdjacentHTML(d,t):r.innerHTML=t}else{let h=l.match(/{.*?}/g);if(null!==h)for(var c=0,u=h.length;c<u;c++){if(h[c]===e){l=l.replace(h[c],t);continue}let p=this.binding[h[c]];void 0!==p&&(l=l.replace(h[c],p.data))}r.setAttribute(o[n].type,l)}}i.data=t}Get(e=""){return void 0===this.binding[e]?null:this.binding[e].data}Unique(e="id",t=this.element){this.root.querySelectorAll(`[${e}]`).forEach(s=>{let i="x"+Math.random().toString(36).slice(6);t[s.getAttribute(e)]=s,s.setAttribute(e,i)})}}Component.Render=async function(e=null,t=null,s={}){let i=new e;await i.pre(s,t)};const Dispatcher={};Dispatcher.Target=new EventTarget,Dispatcher.On=function(e="",t=null){e.length>0&&null!==t&&Dispatcher.Target.addEventListener(e,e=>{t(e,e.detail)},!0)},Dispatcher.Call=function(e="",t=null){e.length>0&&Dispatcher.Target.dispatchEvent(new CustomEvent(e,{detail:t}))};class E404 extends Component{constructor(){super()}async init(){}async render(){return this.node("div",[this.node("label",["404"],{class:"text-4xl"}),this.node("label",[this.node("span",["Page not found"])])],{class:"flex flex-col"})}}class Login extends Component{constructor(){super()}async init(){let e=await fetch("/api/user/get"),t=await e.json();t.success&&(window.location.hash="#home"),this.Unique(),this.Set("{e.login}",this.Login),this.Set("{error.visible}","hidden"),this.Set("{error.message}","")}render(){return this.node("div",[this.node("div",[this.node("label",[this.node("span",["flashcard."]),this.node("label",[this.node("span",["v0.1"])],{class:"text-xs"})],{class:"text-lg font-bold text-gray-700"}),this.node("label",["Login"],{class:"text-sm font-bold text-gray-700"}),this.node("label",[this.node("span",["{error.message}"])],{class:"text-xs font-bold text-red-500 {error.visible}"}),this.node("input",[],{id:"username",class:"bg-gray-200 px-3 py-2 text-xs rounded-lg outline-0 transition-shadow hover:shadow-md",type:"text",placeholder:"Username"}),this.node("input",[],{id:"password",class:"bg-gray-200 px-3 py-2 text-xs rounded-lg outline-0 transition-shadow hover:shadow-md",type:"password",placeholder:"Password"}),this.node("div",[this.node("button",["Login"],{onclick:"{e.login}",class:"bg-blue-400 text-xs px-6 py-2 w-24 rounded-lg transition-shadow hover:shadow-md hover:shadow-blue-200"})]),this.node("label",[this.node("span",["Don't have an account"]),this.node("br",[]),this.node("span",["Signup"])],{class:"text-sm"}),this.node("div",[this.node("button",["Signup"],{onclick:"window.location.hash = '#signup';",class:"bg-gray-200 text-xs px-6 py-2 w-24 rounded-lg transition-shadow hover:shadow-md"})])],{class:"w-full flex flex-col space-y-3"})],{class:"h-full flex items-center"})}async Login(){this.Set("{error.visible}","hidden"),this.Set("{error.message}","");let e=this.element.username,t=this.element.password;try{if(e.value.length<2||t.value.length<2)throw"Enter username and password";let s=await fetch(`/api/login?username=${e.value}&password=${t.value}`),i=await s.json();if(!i.success)throw i.message;window.location.hash="#home"}catch(o){this.Set("{error.visible}","visible"),this.Set("{error.message}",o)}}}class Signup extends Component{constructor(){super()}async init(){this.Unique(),this.Set("{button.signup}",this.Signup),this.Set("{error.visible}","hidden"),this.Set("{error.message}","")}render(){return this.node("div",[this.node("div",[this.node("label",[this.node("span",["flashcard."]),this.node("label",[this.node("span",["v0.1"])],{class:"text-xs"})],{class:"text-lg font-bold text-gray-700"}),this.node("label",["Signup"],{class:"text-sm font-bold text-gray-700"}),this.node("label",[this.node("span",["{error.message}"])],{class:"text-xs font-bold text-red-500 {error.visible}"}),this.node("input",[],{id:"name",class:"bg-gray-200 px-3 py-2 text-xs rounded-lg outline-0 transition-shadow hover:shadow-md",type:"text",placeholder:"Name"}),this.node("input",[],{id:"username",class:"bg-gray-200 px-3 py-2 text-xs rounded-lg outline-0 transition-shadow hover:shadow-md",type:"text",placeholder:"Username"}),this.node("input",[],{id:"password",class:"bg-gray-200 px-3 py-2 text-xs rounded-lg outline-0 transition-shadow hover:shadow-md",type:"password",placeholder:"Password"}),this.node("div",[this.node("button",["Signup"],{onclick:"{button.signup}",class:"bg-blue-400 text-xs px-6 py-2 w-24 rounded-lg transition-shadow hover:shadow-md hover:shadow-blue-200"})]),this.node("label",[this.node("span",["Already have an account"]),this.node("br",[]),this.node("span",["Login"])],{class:"text-sm"}),this.node("div",[this.node("button",["Login"],{onclick:"window.location.hash = '#login';",class:"bg-gray-200 text-xs px-6 py-2 w-24 rounded-lg transition-shadow hover:shadow-md"})])],{class:"w-full flex flex-col space-y-3"})],{class:"h-full flex items-center"})}async Signup(){this.Set("{error.visible}","hidden"),this.Set("{error.message}","");let e=this.element.name,t=this.element.username,s=this.element.password;try{if(e.value.length<2||t.value.length<2||s.value.length<2)throw"Enter name, username and password";let i=await fetch(`/api/signup?name=${e.value}&username=${t.value}&password=${s.value}`),o=await i.json();if(!o.success)throw o.message;window.location.hash="#home"}catch(n){this.Set("{error.visible}","visible"),this.Set("{error.message}",n)}}}class Header extends Component{constructor(){super()}async init(e={}){this.Set("{c-hidden}","hidden"),this.Set("{e-hidden}",this.Menu),this.Set("{user.logout}",this.Logout)}render(){return this.node("div",[this.node("div",[this.node("a",["flashcard"],{class:"sm:text-xl",href:"#home"}),this.node("span",[],{class:"w-full"}),this.node("button",[],{onclick:"{e-hidden}",class:"fa fa-bars text-xl transition-colors hover:text-blue-500"})],{class:"flex items-center"}),this.node("div",[this.node("a",["Home"],{href:"#home"}),this.node("a",["Search"],{href:"#search"}),this.node("a",["Profile"],{href:"#user"}),this.node("label",["Logout"],{onclick:"{user.logout}"})],{class:"flex flex-col text-sm space-y-2 my-3 font-semibold underline {c-hidden}"})])}Menu(){this.Set("{c-hidden}","hidden"==this.Get("{c-hidden}")?"visible":"hidden")}async Logout(){let e=await fetch("/api/logout"),t=await e.json();t.redirect.length>0&&(window.location.hash=t.redirect)}}class Create extends Component{constructor(){super()}init(){this.Unique(),this.Set("{post.create}",this.Create)}render(){return this.node("div",[this.node("textarea",[],{id:"postbox",class:"bg-transparent w-full h-20 resize-none text-sm outline-none",placeholder:"Write Something"}),this.node("button",["Create"],{onclick:"{post.create}",class:"bg-blue-400 text-xs px-6 py-2 rounded-lg transition-shadow hover:shadow-md hover:shadow-blue-200"})],{class:"bg-gray-100 p-3 rounded-lg shadow-md border-2 border-gray-200 border-opacity-50"})}async Create(){let e=this.element.postbox;if(null!==e||e.value.length>0){let t=await fetch(`/api/post/create?content=${e.value}`),s=await t.json();s.success?this.parent.PostLoad():alert("Unable to post")}}}class Card extends Component{constructor(){super(),this.Liked=!1}async init(e={}){this.Liked=e.liked,this.Set("{t-content}",e.content),this.Set("{t-author}",e.name),this.Set("{t-time}",e.time),this.Set("{t-like}",e.like),this.Set("{e-like}",this.Like),this.Set("{e-delete}",this.Delete),this.Set("{user.redirect}",this.Redirect),this.Set("{c-like}",this.Liked?"text-blue-400":"text-black"),this.Set("{c-border-color}",this.Liked?"border-blue-400":"border-gray-200"),this.Set("{c-delete}",e.delete?"visible":"invisible")}render(){return this.node("div",[this.node("div",[this.node("label",[this.node("span",["@"]),this.node("span",["{t-author}"])],{class:"font-semibold",onclick:"{user.redirect}"}),this.node("label",[this.node("span",["at "]),this.node("span",["{t-time}"])],{class:"text-xs font-semibold"})],{class:"text-sm flex flex-col"}),this.node("div",[this.node("label",[this.node("span",["{t-content}"])],{class:"text-sm"})]),this.node("div",[this.node("button",[],{onclick:"{e-like}",class:"fa fa-heart {c-like}"}),this.node("label",[this.node("span",["{t-like}"])],{class:"text-sm"}),this.node("button",[],{class:"{c-delete} fa fa-trash absolute right-0 text-sm",onclick:"{e-delete}"})],{class:"space-x-2 flex items-center relative"})],{class:"bg-gray-100 p-3 mt-3 sm:space-y-4 space-y-2 rounded-lg shadow-md border-2 {c-border-color} border-opacity-50 transition-colors"})}Redirect(){window.location.hash=`#user?id=${this.args.userid}`}async Like(){let e=await fetch(`/api/post/like?postid=${this.args.id}`),t=await e.json(),s=parseInt(this.Get("{t-like}"));t.data.liked?this.Set("{t-like}",s+1):this.Set("{t-like}",s-1<0?0:s-1),this.Set("{c-like}",t.data.liked?"text-blue-400":"text-black"),this.Set("{c-border-color}",t.data.liked?"border-blue-400":"border-gray-200")}async Delete(){let e=await fetch(`/api/post/delete?postid=${this.args.id}`),t=await e.json();t.success?this.parent.PostLoad():alert(t.message),Dispatcher.Call("OnPostChange")}}class PCard extends Component{constructor(){super()}async init(e={}){this.Set("{user.name}",e.name),this.Set("{user.following}",e.following?"Following":"Follow"),this.Set("{follow.visible}",e.follow?"visible":"invisible"),this.Set("{user.follow}",this.Follow),this.Set("{user.redirect}",this.Redirect)}async render(){return this.node("div",[this.node("div",[this.node("label",[this.node("span",["@"]),this.node("span",["{user.name}"])],{class:"w-full font-semibold",onclick:"{user.redirect}"}),this.node("button",[this.node("span",["{user.following}"])],{onclick:"{user.follow}",class:"bg-blue-400 text-xs px-6 py-2 rounded-lg transition-shadow hover:shadow-md hover:shadow-blue-400 {follow.visible}"})],{class:"flex items-center"})],{class:"space-y-3 p-3 mt-3 bg-gray-100 shadow-md rounded-lg border-2 border-gray-200 border-opacity-50"})}async Follow(){let e=await fetch(`/api/user/follow?userid=${this.args.id}`),t=await e.json();this.Set("{user.following}",t.data.following?"Following":"Follow"),Dispatcher.Call("OnFollowChange")}Redirect(){window.location.hash=`#user?id=${this.args.id}`}}class Profile extends Component{constructor(){super(),this.userid=""}async init(){let e=window.location.hash,t=e.match(/\?id=[0-9]*/g);null!==t&&(this.userid=t[0].split("=")[1]),this.Load(!0),this.Set("{post.active}","font-normal"),this.Set("{follower.active}","font-normal"),this.Set("{following.active}","font-normal"),this.Set("{user.follow}",this.Follow),this.Set("{tab.post}",()=>{this.Tab("post")}),this.Set("{tab.follower}",()=>{this.Tab("follower")}),this.Set("{tab.following}",()=>{this.Tab("following")}),this.Tab("post"),Dispatcher.On("OnFollowChange",this.Load.bind(this)),Dispatcher.On("OnPostChange",this.Load.bind(this))}async render(){return this.node("div",[this.node("div",[this.node("label",[this.node("span",["@"]),this.node("span",["{user.name}"])],{class:"w-full font-semibold"}),this.node("button",[this.node("span",["{user.following}"])],{onclick:"{user.follow}",class:"bg-blue-400 text-xs px-6 py-2 rounded-lg transition-shadow hover:shadow-md hover:shadow-blue-400 {follow.visible}"})],{class:"flex items-center"}),this.node("div",[this.node("button",[this.node("span",["Post"]),this.node("br",[]),this.node("span",["{post.count}"])],{onclick:"{tab.post}",class:"{post.active}"}),this.node("button",[this.node("span",["Follower"]),this.node("br",[]),this.node("span",["{follower.count}"])],{onclick:"{tab.follower}",class:"{follower.active}"}),this.node("button",[this.node("span",["Following"]),this.node("br",[]),this.node("span",["{following.count}"])],{onclick:"{tab.following}",class:"{following.active}"})],{class:"space-x-3 text-sm"})],{class:"space-y-3 p-3 bg-gray-100 shadow-md rounded-lg border-2 border-gray-200 border-opacity-50"})}async Load(e=!1){let t=await fetch(`/api/user/get${0==this.userid.length?"":`?userid=${this.userid}`}`),s=await t.json();s.redirect.length>0&&(window.location.hash=s.redirect),this.Set("{user.name}",s.data.user_name),this.Set("{post.count}",s.data.post_count),this.Set("{follower.count}",s.data.follower_count),this.Set("{following.count}",s.data.following_count),this.Set("{follow.visible}",s.data.can_follow?"visible":"invisible"),this.Set("{user.following}",s.data.user_following?"Following":"Follow")}Tab(e="post"){"post"==e?(this.Set("{post.active}","font-bold"),this.Set("{follower.active}","font-normal"),this.Set("{following.active}","font-normal"),this.parent.PostLoad()):"follower"==e?(this.Set("{post.active}","font-normal"),this.Set("{follower.active}","font-bold"),this.Set("{following.active}","font-normal"),this.parent.FollowLoad("follower")):(this.Set("{post.active}","font-normal"),this.Set("{follower.active}","font-normal"),this.Set("{following.active}","font-bold"),this.parent.FollowLoad("following"))}async Follow(){if(this.userid>0){let e=await fetch(`/api/user/follow?userid=${this.userid}`),t=await e.json();this.Set("{user.following}",t.data.following?"Following":"Follow"),Dispatcher.Call("OnFollowChange")}}}class Home extends Component{constructor(){super()}async init(){this.PostLoad()}async render(){return this.node("div",[await this.component(Header,{}),this.node("div",[await this.component(Create,{}),this.node("span",["{post.list}"])],{class:"space-y-3"})],{class:"space-y-5"})}async PostLoad(){let e=await fetch("/api/post/list"),t=await e.json();t.redirect.length>0&&(window.location.hash=t.redirect),this.Set("{post.list}","");let s=t.data;for(var i=0,o=s.length;i<o;i++){let n=s[i].post_date.split("T");this.Set("{post.list}++",await this.component(Card,{id:s[i].post_id,userid:s[i].user_id,name:s[i].user_name,time:`${n[0]} ${n[1].split(".")[0]}`,like:s[i].post_like,content:s[i].post_content,delete:s[i].post_delete,liked:s[i].post_liked}))}}}class Search extends Component{constructor(){super()}async init(){this.Unique(),this.Load(),this.Set("{user.search}",this.Load)}async render(){return this.node("div",[await this.component(Header,{}),this.node("div",[this.node("input",[],{id:"search",class:"bg-gray-200 px-3 py-2 w-full text-xs rounded-lg rounded-r-none outline-0 transition-shadow hover:shadow-md",type:"text",placeholder:"Search People"}),this.node("button",[this.node("i",[],{class:"fa fa-search"})],{onclick:"{user.search}",class:"bg-blue-400 text-xs px-6 py-2 rounded-lg rounded-l-none transition-shadow hover:shadow-md hover:shadow-blue-200"})],{class:"flex"}),this.node("span",["{search.list}"])],{class:"space-y-5"})}async Load(){let e=await fetch(`/api/user/search?name=${this.element.search.value}`),t=await e.json();t.redirect.length>0&&(window.location.hash=t.redirect),this.Set("{search.list}","");let s=t.data;for(var i=0,o=s.length;i<o;i++)this.Set("{search.list}++",await this.component(PCard,{id:s[i].user_id,name:s[i].user_name,following:s[i].user_following,follow:s[i].user_follow}))}}class User extends Component{constructor(){super(),this.userid=""}async init(){let e=window.location.hash,t=e.match(/\?id=[0-9]*/g);null!==t&&(this.userid=t[0].split("=")[1]),this.PostLoad()}async render(){return this.node("div",[await this.component(Header,{}),await this.component(Profile,{}),this.node("span",["{content.list}"])],{class:"space-y-5"})}async PostLoad(){let e=await fetch(`/api/post/list${0==this.userid.length?"?self":`?userid=${this.userid}`}`),t=await e.json();t.redirect.length>0&&(window.location.hash=t.redirect),this.Set("{content.list}","");let s=t.data;for(var i=0,o=s.length;i<o;i++){let n=s[i].post_date.split("T");this.Set("{content.list}++",await this.component(Card,{id:s[i].post_id,userid:s[i].user_id,name:s[i].user_name,time:`${n[0]} ${n[1].split(".")[0]}`,like:s[i].post_like,content:s[i].post_content,delete:s[i].post_delete,liked:s[i].post_liked}))}}async FollowLoad(e="follower"){let t=await fetch(`/api/user/${e}/list${0==this.userid.length?"":`?userid=${this.userid}`}`),s=await t.json();s.redirect.length>0&&(window.location.hash=s.redirect),this.Set("{content.list}","");let i=s.data;for(var o=0,n=i.length;o<n;o++)this.Set("{content.list}++",await this.component(PCard,{id:i[o].user_id,name:i[o].user_name,following:i[o].user_following,follow:i[o].user_follow}))}}class Router{constructor(e={}){this.route={},this.component=null,this.key="",this.default="",Object.assign(this,e)}Add(e="",t=null){this.list[e]=t}Find(e=""){let t=this.route[e.toLowerCase()];return void 0!==t?t:E404}async Set(){let e=window.location.hash,t=e.match(/\#\w+/g);if(0==e.length&&(window.location.hash=this.default),null!==t){let s=this.Find(t[0]),i=new s;this.component.Set(this.key,await i.pre())}}Observe(){window.onhashchange=()=>{this.Set()}}}Router.Hash=function(e=""){window.location.hash=e};class App extends Component{constructor(){super()}async init(){let e=new Router({component:this,key:"{app}",route:{"#login":Login,"#signup":Signup,"#home":Home,"#user":User,"#search":Search},default:"#login"});e.Set(),e.Observe()}async render(){return this.node("div",["{app}"],{class:"w-full h-full overflow-auto p-6 scroll"})}}Component.Render(App,{},".app");
</script>